<script setup>
import { ref, onMounted, nextTick } from 'vue';
import { useRouter } from 'vue-router';
import { usePostStore } from '@/stores/posts';

const router = useRouter();
const postStore = usePostStore();
const hotTopics = ref([
  { 
    id: 1, 
    title: 'ÁÉ≠Èó®‰∫åÊ¨°ÂÖÉÊâãÂäûÊî∂ËóèÊåáÂçóÔºöÂì™‰∫õËßíËâ≤ÊâãÂäûÊ≠£È£éÈù°Ôºü' 
  },
  { 
    id: 2, 
    title: 'ÊâãÂäûÊ®°ÂûãÂà∂‰ΩúÊïôÁ®ãÔºö‰ªéÈõ∂ÂºÄÂßãÁöÑÂàõÈÄ†‰πãÊóÖ' 
  },
  { 
    id: 3, 
    title: '‰∫åÊ¨°ÂÖÉÊâãÂäûÂ∏ÇÂú∫Ë∂ãÂäøÔºöÊú™Êù•ÁÉ≠Èó®‰ΩïÂú®Ôºü' 
  }
]);
const posts = ref([
  {
    id: 1,
    username: '‰∏çÂêÉÈ¶ôËèú',
    userAvatar: '/src/assets/avatar1.jpg',
    title: 'ÈæôÊóèÁï™Â§ñ',
    image: '/src/assets/wenzhang1.jpg',
    content: [
      {
        type: 'text',
        content: '‰ªäÂ§©ÂíåÂ§ßÂÆ∂ÂàÜ‰∫´‰∏Ä‰∏ãÈæôÊóèÁï™Â§ñÁöÑÂÜÖÂÆπËß£Êûê„ÄÇËøôÈÉ®‰ΩúÂìÅÂª∂Áª≠‰∫ÜÈæôÊóè‰∏ÄË¥ØÁöÑÁ≤æÂΩ©ÂâßÊÉÖÂíåÊ∑±Â∫¶ËÆæÂÆö...'
      },
      {
        type: 'subtitle',
        content: '‰∫∫Áâ©ÂÖ≥Á≥ª'
      },
      {
        type: 'text',
        content: 'Áï™Â§ñ‰∏ªË¶ÅËÆ≤Ëø∞‰∫ÜË∑ØÊòéÈùûÂíåÊ•öÂ≠êËà™Âú®Ê†°Âõ≠Êó∂ÊúüÁöÑÊïÖ‰∫ãÔºåÂ±ïÁé∞‰∫Ü‰ªñ‰ª¨‰πãÈó¥Ê∑±ÂéöÁöÑÂèãË∞ä...'
      }
    ],
    views: 1234,
    likes: 88,
    stars: 32,
    tags: ['ÈæôÊóè', 'Ë∑ØÊòéÈùû', 'Ê•öÂ≠êËà™', 'Â∞èËØ¥', 'Áï™Â§ñ']
  },
  {
    id: 2,
    username: '‰∫åÊ¨°ÂÖÉËææ‰∫∫',
    userAvatar: '/src/assets/avatar2.jpg',
    title: 'ÊâãÂäû‰øÆÂ§çÊó•ÂøóÔºö‰ªéÁ†¥ÊçüÂà∞ÁÑïÊñ∞',
    image: ['/src/assets/wenzhang2-1.png','/src/assets/wenzhang2-2.png','/src/assets/wenzhang2-3.png',
            '/src/assets/wenzhang2-4.png','/src/assets/wenzhang2-5.png','/src/assets/wenzhang2-6.png',
            '/src/assets/wenzhang2-7.png'],
    content: [
      {
        type: 'text',
        content: '‰ªäÂ§©Ë¶ÅÂíåÂ§ßÂÆ∂ÂàÜ‰∫´‰∏Ä‰∏™Á†¥ÊçüÊâãÂäûÁöÑ‰øÆÂ§çËøáÁ®ã„ÄÇËøôÊòØ‰∏Ä‰∏™Â∑≤Áªè‰ΩøÁî®Â§öÂπ¥ÁöÑÂàùÈü≥Êú™Êù•ÊâãÂäûÔºåÁî±‰∫é‰∏çÂΩìÂ≠òÊîæÂØºËá¥Â§öÂ§ÑÁ†¥Êçü„ÄÇ'
      },
      {
        type: 'image',
        content: '/src/assets/wenzhang2-1.png',
        description: 'Á†¥ÊçüÁöÑÂàùÈü≥ÊâãÂäûÊï¥‰ΩìÂõæ'
      },
      {
        type: 'text',
        content: 'È¶ñÂÖàÂØπÁ†¥ÊçüÈÉ®‰ΩçËøõË°åÊ∏ÖÁêÜÂíåÂõ∫ÂÆö„ÄÇ‰ΩøÁî®‰∏ì‰∏öÁöÑÊ®°Âûã‰øÆÂ§çÂ∑•ÂÖ∑ÔºåÂ∞èÂøÉÂú∞Â§ÑÁêÜÊñ≠Ë£ÇÁöÑËæπÁºò„ÄÇ'
      },
      {
        type: 'image',
        content: '/src/assets/wenzhang2-2.png',
        description: '‰øÆÂ§çÂ∑•ÂÖ∑ÂíåÊùêÊñôÂáÜÂ§á'
      },
      {
        type: 'text',
        content: 'Êé•‰∏ãÊù•‰ΩøÁî®ÁéØÊ∞ßÊ†ëËÑÇËøõË°åÁ≤òÂêà„ÄÇËøô‰∏™Ê≠•È™§ÈúÄË¶ÅÁâπÂà´Ê≥®ÊÑèÔºåÂõ†‰∏∫ÁéØÊ∞ßÊ†ëËÑÇÁöÑÂõ∫ÂåñÊó∂Èó¥ÊúâÈôê„ÄÇ'
      },
      {
        type: 'image',
        content: '/src/assets/wenzhang2-3.png',
        description: 'Á≤òÂêà‰øÆÂ§çËøáÁ®ã'
      },
      {
        type: 'subtitle',
        content: 'Ëâ≤ÂΩ©‰øÆÂ§çÈò∂ÊÆµ'
      },
      {
        type: 'text',
        content: 'Á≤òÂêàÂÆåÊàêÂêéÔºåÈúÄË¶ÅËøõË°åÁªÜËá¥ÁöÑÊâìÁ£®Âíå‰∏äËâ≤„ÄÇ‰ΩøÁî®‰∏ì‰∏öÁöÑÊ®°ÂûãÊ∂ÇÊñôÔºå‰∏ÄÁÇπ‰∏ÄÁÇπËøòÂéüÂéüÊúâÁöÑËâ≤ÂΩ©„ÄÇ'
      },
      {
        type: 'image',
        content: '/src/assets/wenzhang2-4.png',
        description: 'Ëâ≤ÂΩ©‰øÆÂ§ç‰∏≠'
      },
      {
        type: 'text',
        content: 'ÊúÄÈöæÁöÑÈÉ®ÂàÜÊòØÂ§¥ÂèëÁöÑÊ∏êÂèòËâ≤Â§ÑÁêÜÔºåÈúÄË¶ÅÂ§öÊ¨°Ë∞ÉËâ≤ÂíåËØïÈ™åÊâçËÉΩËææÂà∞ÁêÜÊÉ≥ÊïàÊûú„ÄÇ'
      },
      {
        type: 'image',
        content: '/src/assets/wenzhang2-5.png',
        description: 'Â§¥ÂèëÈÉ®ÂàÜ‰øÆÂ§ç'
      },
      {
        type: 'subtitle',
        content: 'ÊúÄÁªàÊïàÊûú'
      },
      {
        type: 'text',
        content: 'ÁªèËøáËøë‰∏ÄÂë®ÁöÑ‰øÆÂ§çÂ∑•‰ΩúÔºåËøô‰∏™Á†¥ÊçüÁöÑÊâãÂäûÁªà‰∫éÊÅ¢Â§ç‰∫ÜÂæÄÊó•ÁöÑÂÖâÂΩ©„ÄÇ'
      },
      {
        type: 'image',
        content: '/src/assets/wenzhang2-6.png',
        description: '‰øÆÂ§çÂêéÊï¥‰ΩìÊïàÊûú'
      },
      {
        type: 'text',
        content: '‰øÆÂ§çÂêéÁöÑÊâãÂäûÊîæÂú®‰∏ìÈó®ÁöÑÂ±ïÁ§∫Êüú‰∏≠ÔºåÈÅøÂÖçÂÜçÊ¨°ÂèóÊçü„ÄÇÂ∏åÊúõËøô‰∏™‰øÆÂ§çÊó•ÂøóËÉΩÁªôÂ§ßÂÆ∂‰∏Ä‰∫õÂèÇËÄÉÔºÅ'
      },
      {
        type: 'image',
        content: '/src/assets/wenzhang2-7.png',
        description: 'Â±ïÁ§∫ÊüúÈôàÂàóÊïàÊûú'
      }
    ],
    views: 2345,
    likes: 120,
    stars: 45,
    tags: ['ÊâãÂäû‰øÆÂ§ç', 'ÂàùÈü≥Êú™Êù•', 'ÊïôÁ®ã', 'DIY']
  }
]);
const activities = ref([
  { id: 1, title: 'ÂπøÂ∑ûÊöëÊúüCity walkÔºåÊâìÂç°Ê≠£‰Ω≥ÊòüÁêÉË∑®Ê¨°ÂÖÉÁãÇÊ¨¢' },
  { id: 2, title: '‚Äú‰∫åÊ¨°ÂÖÉ‚ÄùËµ∞ËøõÁé∞ÂÆûÔºåËÄÅÂïÜÂú∫ÁÑïÂèëÁîüÊú∫' },
  { id: 3, title: 'ÊúÄÊñ∞‰∫åÊ¨°ÂÖÉ‰∏ªÈ¢òË°óÂå∫Ôºå‰∫ÆÁõ∏Ê∞ëÁõà¬∑ÂõΩË¥∏Âüé' }
])

const activeTab = ref('plaza');
const underlineStyle = ref({ width: '0px', left: '0px' });

const updateUnderlinePosition = () => {
  const activeTabElement = activeTab.value === 'discover' 
    ? document.querySelector('.tab:first-child') 
    : document.querySelector('.tab:last-child')
    
  if (activeTabElement) {
    const { width, left } = activeTabElement.getBoundingClientRect()
    const parentLeft = activeTabElement.parentElement.getBoundingClientRect().left
    underlineStyle.value = {
      width: `${width}px`,
      left: `${left - parentLeft}px`
    }
  }
}

const handleTabChange = (tab) => {
  activeTab.value = tab;
  if (tab === 'plaza') {
    router.push('/plaza')
  } else if (tab === 'discover') {
    router.push('/home')
  }
  nextTick(() => {
    updateUnderlinePosition();
  });
};

const handleViewAllTopics = () => {
  router.push('/topics')
}

const handleImageError = (e) => {
  e.target.src = '/src/assets/default-post.jpg'
};

const handleAvatarError = (e) => {
  e.target.src = '/src/assets/default-avatar.jpg'
};

const handlePostClick = (post) => {
  const articleData = {
    id: post.id,
    title: post.title || 'Êó†Ê†áÈ¢ò',
    author: {
      username: post.username || 'Êú™Áü•Áî®Êà∑',
      avatar: post.userAvatar || '/src/assets/default-avatar.jpg'
    },
    content: post.content || [
      {
        type: 'text',
        content: post.title || 'ÊöÇÊó†ÂÜÖÂÆπ'
      }
    ],
    stats: {
      views: post.views || 0,
      likes: post.likes || 0,
      stars: post.stars || 0
    },
    images: Array.isArray(post.image) ? post.image : [post.image],
    tags: post.tags || ["Âêå‰∫∫", "ÊâãÂäû", "‰øÆÂ§ç"]
  }

  localStorage.setItem(`article_${post.id}`, JSON.stringify(articleData))

  router.push({
    name: 'ArticleDetail',
    params: { id: post.id },
    state: { article: articleData }
  })
}

const handleActivityClick = (activityId) => {
  router.push(`/activity/${activityId}`)
}

onMounted(async () => {
  updateUnderlinePosition();
});

// Ëé∑ÂèñË¶ÅÊòæÁ§∫ÁöÑÂõæÁâá
const getDisplayImage = (post) => {
  if (Array.isArray(post.image)) {
    return post.image[0];
  }
  return post.image;
};
</script>

<template>
  <div class="plaza-page">
    <div class="top-section">
      <!-- È°∂ÈÉ®Ê†áÁ≠æÈ°µ -->
      <div class="tabs">
        <div 
          :class="['tab', activeTab === 'discover' ? 'active' : '']"
          @click="handleTabChange('discover')"
        >ÂèëÁé∞</div>
        <div 
          :class="['tab', activeTab === 'plaza' ? 'active' : '']"
          @click="handleTabChange('plaza')"
        >ÂπøÂú∫</div>
        <div class="underline" :style="underlineStyle"></div>
      </div>

      <!-- ÊêúÁ¥¢Ê°Ü -->
      <div class="search-box">
        <svg class="search-icon" viewBox="0 0 24 24" width="18" height="18">
          <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input type="text" placeholder="ÊêúÁ¥¢ÊÑüÂÖ¥Ë∂£ÁöÑÂÜÖÂÆπ">
      </div>
    </div>

    <div class="plaza-container">
      <!-- ËØùÈ¢òÂå∫Âüü -->
      <div class="section">
        <div class="section-header">
          <h2>ËØùÈ¢ò</h2>
          <span class="more" @click="handleViewAllTopics">ÂÖ®ÈÉ®ËØùÈ¢ò ></span>
        </div>
        <div class="topic-container">
          <div class="topic-list">
            <div v-for="(topic, index) in hotTopics" :key="topic.id" class="topic-item">
              <div class="rank-icon" :class="`rank-${index + 1}`">
                <span class="fire-icon">üî•</span>
                <span class="rank-number">{{ index + 1 }}</span>
              </div>
              <span class="topic-title">{{ topic.title }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Ê¥ªÂä®Âå∫Âüü -->
      <div class="section">
        <div class="section-header">
          <h2>ÁÉ≠Èó®Ê¥ªÂä®</h2>
          <span class="more" @click="router.push('/activity')">ÂÖ®ÈÉ®Ê¥ªÂä® ></span>
        </div>
        <div class="activity-container">
          <div class="activity-list">
            <div v-for="(activity, index) in activities" :key="activity.id" class="activity-item">
              <div class="rank-icon" :class="`rank-${index + 1}`">
                <span class="fire-icon">üî•</span>
                <span class="rank-number">{{ index + 1 }}</span>
              </div>
              <span class="activity-title">{{ activity.title }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ÊñáÁ´†Â∏ñÂ≠êÂàóË°® -->
      <div class="posts-section">
        <div v-for="post in posts" :key="post.id" class="post-card" @click="handlePostClick(post)">
          <div class="post-header">
            <img 
              :src="post.userAvatar" 
              class="user-avatar"
              @error="handleAvatarError"
            >
            <span class="username">{{ post.username }}</span>
          </div>
          <div class="post-content">
            <div class="post-info">
              <h3 class="post-title">{{ post.title }}</h3>
              <div class="post-stats">
                <div class="stat-item">
                  <i class="icon-eye">üëÅÔ∏è</i>
                  <span>{{ post.views }}</span>
                </div>
                <div class="stat-item">
                  <i class="icon-like">‚ù§Ô∏è</i>
                  <span>{{ post.likes }}</span>
                </div>
                <div class="stat-item">
                  <i class="icon-star">‚≠ê</i>
                  <span>{{ post.stars }}</span>
                </div>
              </div>
            </div>
            <div class="post-image-container">
              <img 
                :src="getDisplayImage(post)" 
                class="post-image"
                @error="handleImageError"
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.plaza-page {
  min-height: 100vh;
  background: #fff;
  max-width: 600px;
  margin: 0 auto;
  position: relative;
}

.top-section {
  background-image: linear-gradient(90deg, rgba(227, 253, 245, 1) 0%, rgba(255, 230, 250, 1) 100%);
  padding-bottom: 15px;
}

.tabs {
  position: sticky;
  top: 0;
  display: flex;
  background: transparent;
  padding: 0 16px;
  position: relative;
  justify-content: flex-start;
  align-items: center;
  height: 80px;
}

.tab {
  flex: 1;
  width: 60px;
  font-size: 30px;
  font-weight: 400;
  letter-spacing: 0px;
  line-height: 43.44px;
  text-align: center;
  opacity: 1;
}

.tab:first-child {
  left: 96px;
  top: 21px;
  height: 51px;
  color: rgba(128, 128, 128, 1);
}

.tab:last-child {
  left: 200px;
  top: 21px;
  height: 51px;
  color: rgba(0, 0, 0, 1);
}

.tab.active {
  font-weight: 400;
  color: rgba(0, 0, 0, 1);
}

.search-box {
  margin: 10px 15px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 20px;
  padding: 8px 15px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.search-icon {
  color: #999;
  flex-shrink: 0;
}

.search-box input {
  width: 100%;
  border: none;
  background: transparent;
  font-size: 14px;
  outline: none;
  color: #333;
}

.underline {
  position: absolute;
  bottom: 0;
  height: 3px;
  background-color: #4CAF50;
  transition: all 0.3s ease;
}

.section {
  padding: 16px 0;
  background: #fff;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding: 0 16px;
}

.section-header h2 {
  font-size: 16px;
  font-weight: bold;
  color: #333;
}

.more {
  font-size: 12px;
  color: #999;
}

.topic-container, .activity-container {
  background: #FFF3EA;
  border-radius: 12px;
  padding: 12px;
  margin: 0 16px;
}

.topic-list, .activity-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.topic-item, .activity-item {
  display: flex;
  align-items: center;
  padding: 8px;
  background: transparent;
  border-radius: 8px;
  gap: 8px;
}

.rank-icon {
  position: relative;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fire-icon {
  position: absolute;
  font-size: 24px;
}

.rank-number {
  position: relative;
  font-size: 12px;
  font-weight: bold;
  color: #fff;
  z-index: 1;
}

.rank-1 .fire-icon {
  color: #FF4D4F;
}

.rank-2 .fire-icon {
  color: #FF7A45;
}

.rank-3 .fire-icon {
  color: #FFA940;
}

.topic-title, .activity-title {
  flex: 1;
  font-size: 14px;
  color: #333;
}

.divider {
  height: 8px;
  background-color: #f5f5f5;
  width: 100%;
  margin: 16px 0;
}

.content-list {
  padding: 12px;
}

.post-item {
  margin-bottom: 16px;
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
}

.post-header {
  padding: 12px;
}

.post-image {
  width: 100%;
  height: 200px;
  object-fit: cover;
}

.waterfall-list {
  padding: 8px;
  column-count: 2;
  column-gap: 8px;
}

.waterfall-item {
  break-inside: avoid;
  margin-bottom: 8px;
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
}

.waterfall-item .post-image {
  width: 100%;
  padding-top: 100%;
  position: relative;
}

.waterfall-item .post-image img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.waterfall-item .post-info {
  padding: 8px;
}

.post-title {
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 4px;
}

.post-summary {
  font-size: 12px;
  color: #666;
  line-height: 1.4;
}

.waterfall-layout {
  padding: 12px;
}

.post-card {
  background: #fff;
  border-radius: 8px;
  margin-bottom: 16px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.post-header {
  display: flex;
  align-items: center;
  padding: 12px;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  margin-right: 8px;
}

.username {
  font-size: 14px;
  font-weight: 500;
}

.post-image {
  width: 100%;
  height: 200px;
  object-fit: cover;
}

.post-content {
  padding: 12px;
}

.post-title {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 8px;
}

.post-description {
  font-size: 14px;
  color: #666;
  line-height: 1.4;
  margin-bottom: 12px;
}

.post-stats {
  display: flex;
  gap: 16px;
  color: #999;
  font-size: 12px;
}

/* ÁÄëÂ∏ÉÊµÅÊ®°ÂºèÊ†∑Âºè */
.waterfall-mode {
  padding: 12px;
  background: #fff;
}

.post-card {
  background: #f5f5f5;
  border-radius: 8px;
  margin-bottom: 16px;
  overflow: hidden;
}

.post-header {
  padding: 12px;
  display: flex;
  align-items: center;
  background: #fff;
}

.post-content {
  padding: 12px;
  background: #fff;
}

.user-info {
  display: flex;
  align-items: center;
  margin-bottom: 8px;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  margin-right: 8px;
}

.username {
  font-size: 14px;
  font-weight: 500;
}

.post-title {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 4px;
}

.post-description {
  font-size: 14px;
  color: #666;
  margin-bottom: 8px;
}

.post-stats {
  display: flex;
  gap: 16px;
  color: #999;
  font-size: 12px;
}

/* Ê¥ªÂä®ÂàóË°®Ê†∑Âºè */
.activity-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.activity-item {
  display: flex;
  background: #f5f5f5;
  border-radius: 8px;
  overflow: hidden;
  padding: 12px;
}

.activity-image {
  width: 80px;
  height: 80px;
  border-radius: 4px;
  margin-right: 12px;
}

.activity-info {
  flex: 1;
}

.activity-info h3 {
  font-size: 16px;
  margin-bottom: 8px;
}

.activity-info p {
  font-size: 14px;
  color: #666;
  line-height: 1.4;
}

/* ‰øÆÊîπÈªòËÆ§Ê®°ÂºèÁöÑÊ†∑Âºè‰ª•ÂåπÈÖçËÆæËÆ°Âõæ */
.topic-item, .activity-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  margin-bottom: 12px;
}

.rank {
  width: 24px;
  text-align: center;
  font-weight: bold;
}

.topic-image, .activity-image {
  width: 40px;
  height: 40px;
  border-radius: 4px;
  margin: 0 12px;
}

.topic-title, .activity-title {
  flex: 1;
  font-size: 14px;
}

/* ‰øÆÊîπÂàáÊç¢ÊåâÈíÆÊ†∑Âºè */
.mode-switch {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 8px 16px;
}

.topic-item, .activity-item {
  background: #f5f5f5;
  border-radius: 8px;
  padding: 12px 16px;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
}

.rank {
  width: 24px;
  font-size: 16px;
  font-weight: bold;
  color: #333;
  margin-right: 12px;
}

.topic-title, .activity-title {
  flex: 1;
  font-size: 14px;
  color: #333;
}

/* ÁÄëÂ∏ÉÊµÅÊ®°ÂºèÊ†∑Âºè */
.waterfall-mode {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.post-card {
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.post-content {
  padding: 16px;
}

.post-title {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 12px;
}

.post-image {
  width: 100%;
  height: 200px;
  object-fit: cover;
  margin-bottom: 12px;
  border-radius: 4px;
}

.comment-section {
  background: #f5f5f5;
  padding: 12px;
  border-radius: 4px;
}

.user-info {
  display: flex;
  align-items: center;
  margin-bottom: 8px;
}

.user-avatar {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  margin-right: 8px;
}

.username {
  font-size: 14px;
  color: #666;
}

.comment-text {
  font-size: 14px;
  color: #333;
  line-height: 1.4;
}

.posts-section {
  padding: 16px;
  background: #fff;
}

.post-card {
  background: #fff;
  border-radius: 12px;
  margin-bottom: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  overflow: hidden;
}

.post-header {
  display: flex;
  align-items: center;
  padding: 12px;
  gap: 8px;
}

.user-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
}

.username {
  font-size: 14px;
  font-weight: 500;
  color: #333;
}

.post-title {
  padding: 0 12px;
  margin: 0 0 12px 0;
  font-size: 16px;
  font-weight: normal;
  color: #333;
  line-height: 1.4;
}

.post-image-container {
  width: 100%;
  aspect-ratio: 16/9;
  overflow: hidden;
}

.post-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Ê∑ªÂä†Âç°Áâá‰πãÈó¥ÁöÑÂàÜÈöî */
.post-card:not(:last-child) {
  border-bottom: 1px solid #f0f0f0;
  padding-bottom: 16px;
}

.post-card {
  padding: 16px;
  border-bottom: 1px solid #f0f0f0;
}

.post-header {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
  gap: 8px;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

.username {
  font-size: 14px;
  color: #333;
}

.post-content {
  display: flex;
  justify-content: space-between;
  gap: 16px;
}

.post-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.post-title {
  display: -webkit-box;
  line-clamp: 2;                /* Ê†áÂáÜÂ±ûÊÄß */
  -webkit-line-clamp: 2;        /* WebKitÊµèËßàÂô®ÊîØÊåÅ */
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.post-stats {
  display: flex;
  gap: 16px;
  margin-top: 12px;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 4px;
  color: #999;
  font-size: 12px;
}

.post-image-container {
  width: 120px;
  height: 120px;
  flex-shrink: 0;
  border-radius: 8px;
  overflow: hidden;
}

.post-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ÂõæÊ†áÊ†∑Âºè */
.icon-eye, .icon-like, .icon-star {
  font-size: 14px;
}

.post-images-container {
  width: 120px;
  height: 120px;
  flex-shrink: 0;
  border-radius: 8px;
  overflow: hidden;
}

.post-images-container.multiple-images {
  width: 180px;
}

.images-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 2px;
  height: 100%;
}

.images-grid .post-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.images-grid .post-image:first-child {
  grid-column: 1 / -1;
  grid-row: 1;
}

.more-images {
  background: rgba(0, 0, 0, 0.5);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  grid-column: 2;
  grid-row: 2;
}

.post-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
</style>
